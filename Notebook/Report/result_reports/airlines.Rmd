---
title: "Airline Results"
author: "Loong Kuan"
date: "13 January 2017"
---

```{r setup, echo = FALSE, message = FALSE}
source("../../../drift_timeline/timeline.R")
source("../../../visualisation.R")
source("../../../visualise_results/result_table.R")
source("../../../visualise_results/heatmaps.R")
source("../../../visualise_results/detailed_likelihood.R")
source("../../../visualise_results/detailed_posterior.R")
```

The results from this data set showcases a functionality I added to use an attribute of the data set to group the data into different windows for analysis.

In this case, I used the attribute `DayOfWeek` to group the data into different consecutive days.
Therefore, the window size of 1 represents the drift between days and the window size of 7 represetns drift between weeks.

Note that this does not gurantee that each week starts on a Sunday or Monday.

```{r electricity, echo = FALSE, message = FALSE, warning = FALSE}
PlotAllWindowSizes("COVARIATE", 1, "../../../../data_out/airlines/stream_chunk/", c())
PlotAllWindowSizes("LIKELIHOOD", 1, "../../../../data_out/airlines/stream_chunk/", c())
PlotAllWindowSizes("POSTERIOR", 1, "../../../../data_out/airlines/stream_chunk/", c())
PlotAllWindowSizes("JOINT", 1, "../../../../data_out/airlines/stream_chunk/", c())
```

From the `Covariate` graph above, we can see from the daily drift graph that there seems to be a periodic drift that occurs over 2 days.
Furthermore, the rate the drift occurs for the first 2 weeks are very similar compared to other weeks.
This can be confirmed by the weekly graph as there is low drift at point `120388`, the point between week 1 and 2.

Other than that, it seems that graphs of the other drift types measured has the same rough shape as the `Covariate` graph.

From the `Posterior` graph, the drift measure over individual attributes seems to peak between week 2 and week 3.
Furthermore, the drift measured over indivisual attributes between week 3 and week 4 seem to vary more than previously.

Below is the analysis between the data for week 1 to 2 and week 3 to 4.

```{r detail, echo = FALSE}
results.pos.1 <- ResultTable(paste0("../../../../data_out/airlines/analyse/1-attributes_posterior_detailed.csv"))
results.pos.2 <- ResultTable(paste0("../../../../data_out/airlines/analyse/2-attributes_posterior_detailed.csv"))
results.like.1 <- ResultTable(paste0("../../../../data_out/airlines/analyse/1-attributes_likelihood_detailed.csv"))
results.like.2 <- ResultTable(paste0("../../../../data_out/airlines/analyse/2-attributes_likelihood_detailed.csv"))
```

### Detailed Likelihood (Single Attributes)
```{r, echo = FALSE}
  VisualSingleLikelihoodAttribute(results.like.1)
```

Individually, there does not seem to be much difference in the `Likelihood` drift between the 2 classes excluding `DayofWeek`.
The difference between the drift in `Likelihhod` for the not delayed, `0`, and delayed, `1`, class 
can be might be duew to the fact data set ended on a period of high drift and possibly a period with a high number of flights, causing flights to be delayed more often.

### Detailed Posterior (Single Attributes)
```{r, echo = FALSE}
  VisualSingleAttributeStructure(results.pos.1, "posterior")
```

From the analysis, we can observe that not only are `airportForm` and `airportTo` the attributes with the greatest posterior drift,
but also that the drift measured is not uniform on all the values of these attributes 
with a few values of these attributes drifting much more greatly than others.
Therefore, this might indicate different airports can vary greatly in its ability to avoid delays.